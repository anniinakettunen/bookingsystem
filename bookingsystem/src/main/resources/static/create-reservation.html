<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Tee varaus</title>
</head>
<body>

<h1>Tee varaus</h1>

<div id="error" style="color:red;"></div>

<form id="reservationForm">

    <label>Valitse huone:</label><br>
    <select id="roomSelect">
        <option value="1">Room A</option>
        <option value="2">Room B</option>
    </select><br><br>

    <label>Alkuaika:</label><br>
    <input type="datetime-local" id="startTime" required><br><br>

    <label>Loppuaika:</label><br>
    <input type="datetime-local" id="endTime" required><br><br>

    <button type="submit">Luo varaus</button>
</form>

<div id="result"></div>

<script src="/js/app.js"></script>
<script>
    document.getElementById("reservationForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const roomId = document.getElementById("roomSelect").value;
        const startTime = document.getElementById("startTime").value;
        const endTime = document.getElementById("endTime").value;

        const start = new Date(startTime);
        const end = new Date(endTime);
        
        if (start.getMinutes() !== 0 || end.getMinutes() !== 0) {
            document.getElementById("result").innerText =
                "Varaus on tehtävä tasatunnein (esim. 16:00–17:00).";
            return;
        }
       
        const diffHours = (end - start) / (1000 * 60 * 60);
        if (diffHours !== 1) {
            document.getElementById("result").innerText =
                "Varausajan on oltava tasan 1 tunti.";
            return;
        }

        createReservation(roomId);
    });
</script>


</body>
</html>
